<% content_for(:toolbar) do %>
  <div class="toolbar_buttons">
    <% if can? :create, Alchemy::ActiveStorageFile %>
      <%= render 'alchemy/admin/active_storage_direct_uploader/button',
                 object: Alchemy::ActiveStorageFile.new,
                 file_attribute: 'active_storage_file',
                 redirect_url: alchemy.admin_active_storage_files_path %>
    <% end %>
    <div class="toolbar_spacer"></div>
    <div class="button_with_label">
      <%= link_to(
            render_icon('check-square', style: 'regular'),
            nil,
            id: 'select_all_files',
            class: 'icon_button',
            'data-alchemy-hotkey' => 'alt+a'
          ) %>
      <label><%= Alchemy.t("Select all") %></label>
    </div>
  </div>
  <%= render 'alchemy/admin/partials/search_form', additional_params: [:filter, :tagged_with] %>
<% end %>

<div id="active_storage_files_archive" class="resources-table-wrapper with_tag_filter">
  <%= render 'alchemy/admin/resources/table_header' %>
  <%= render 'files_list' %>

  <div id="library_sidebar">
    <%= render 'filter_bar' %>

    <% if Alchemy::ActiveStorageFile.tag_counts.any? %>
      <div class="tag-list with_filter_bar<%= ' filtered' if search_filter_params[:tagged_with].present? %>">
        <%= render 'tag_list' %>
      </div>
    <% end %>
  </div>
</div>
